<ion-view view-title="List of issues in the area">
  <ion-nav-bar>
    <ion-nav-back-button>
    </ion-nav-back-button>
    <ion-nav-buttons side="secondary">
        <button class="button icon ion-android-globe" ui-sref="home"></button>
    </ion-nav-buttons>
  </ion-nav-bar>

  <ion-content>
    <ion-list overflow-scroll="true">
          <ion-item ng-repeat="issue in pagedIssues">

            <div class="row">
              <div class="col">
                <p class="state state-{{issue.state}}">{{issue.state}}</p>
                <a ui-sref='fullImg({imageUrl: issue.imageUrl, errSrc: "img/NoImageAvailable.jpg"})'><img class="imgIssue" ng-src='{{issue.imageUrl}}' err-src="img/NoImageAvailable.jpg" style="width:100%" /></a>
              </div>

              <div class="col col-75 item-body listIssue">
                <h2>{{issue.issueType.description}}</h2>
                <ul class="tagsList">
                    <li ng-repeat="tag in issue.tags">{{tag}}</li>
                </ul>
                <p>{{issue.description}}</p>
                <span class="small-info">Updated: <time>{{issue.updatedOn | timeAgo:'MM/dd/yyyy H:mm'}}</time><br/>{{issue.issueType.name}}</span>
              </div>
            </div>

            <div class="button-bar">
                <a class="button button-small ion-location" ui-sref="issueDetails({issueId: issue.id})" > Map</a>
                <a class="button button-small ion-navicon" ui-sref="commentsList({issueId: issue.id})"> Comments</a>
            </div>

          </ion-item>
      </ion-list>
      <ion-infinite-scroll
      ng-if="nextPageDisabledClass()"
      on-infinite="loadMore()"
      distance="1%">
    </ion-infinite-scroll>

  </ion-content>
</ion-view>
